<section id="contacts" [appScrollSpy]="'contacts'" class="py-16 bg-white">
  <div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
    <div>
      <h2 class="text-[#051937] text-[32px] leading-[48px] font-semibold mb-2">{{ 'CONTACTS.PAGE_TITLE' | translate }}</h2>
      <p class="text-[#3C485B] text-[20px] leading-[32px] font-semibold">Valencia</p>
      <a href="https://www.google.com/maps/dir/?api=1&destination=C%2F%20de%20la%20Dama%20d%27Elx%2C%2016%2C%20Camins%20al%20Grau%2C%2046023%20Val%C3%A8ncia%2C%20Valencia" target="_blank" class="block text-[#3C485B] text-[20px] leading-[32px] font-normal hover:underline">{{ 'CONTACTS.ADDRESS_VALUE' | translate }}</a>
      <a href="mailto:chip.service.valencia@gmail.com" class="block mt-4 text-[#3C485B] text-[20px] leading-[32px] font-semibold hover:underline">chip.service.valencia&#64;gmail.com</a>
      <a href="tel:+34647804867" class="block mt-2 text-[#3C485B] text-[20px] leading-[32px] font-normal hover:underline">{{ 'CONTACTS.PHONE_VALUE' | translate }}</a>
      <p class="mt-2 text-[#3C485B] text-[20px] leading-[32px] font-normal">{{ 'CONTACTS.WORKING_HOURS_LABEL' | translate }}:</p>
      <p class="text-[#3C485B] text-[20px] leading-[32px] font-normal">{{ 'CONTACTS.WORKING_HOURS_VALUE' | translate }}</p>
      <a href="https://www.google.com/maps/dir/?api=1&destination=C%2F%20de%20la%20Dama%20d%27Elx%2C%2016%2C%20Camins%20al%20Grau%2C%2046023%20Val%C3%A8ncia%2C%20Valencia" target="_blank" class="mt-6 inline-flex items-center text-[#3C485B] text-[20px] leading-[32px] font-semibold hover:underline">
        {{ 'CONTACTS.GET_DIRECTIONS' | translate }}
        <img src="/images/svg/arrow-right.svg" alt="" class="ml-2" width="20" height="20" />
      </a>
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d5234.153735285058!2d-0.34592362275352834!3d39.46188101319837!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8fc449d80ab2ec23%3A0x6b9787ea4e1e8d13!2sCHIP%20VALENCIA!5e1!3m2!1sru!2ses!4v1750637011534!5m2!1sru!2ses"
        title="Map of CHIP Valencia"
        width="100%"
        height="320"
        style="border:0;"
        allowfullscreen="true"
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        class="w-full mt-4"></iframe>
    </div>
    <div class="bg-[#074BCF] text-[#EEEFEF] p-6 flex flex-col">
      <h3 class="text-[32px] leading-[48px] font-semibold mb-6">{{ 'CONTACTS.FORM_TITLE' | translate }}</h3>
      <form [formGroup]="requestForm" (ngSubmit)="submitRequest()" class="space-y-4 flex-1">
        <div>
          <label for="contact-name" class="block mb-1 text-[14px] leading-[20px] font-normal">{{ 'CONTACTS.NAME' | translate }}</label>
          <input id="contact-name" formControlName="name" type="text" class="w-full bg-[#EEEFEF] text-[#3C485B] px-3 py-2" />
          @if (requestForm.get('name')?.touched && requestForm.get('name')?.invalid) {
            <div class="text-red-200 text-sm">*</div>
          }
        </div>
        <div>
          <label for="contact-phone" class="block mb-1 text-[14px] leading-[20px] font-normal">{{ 'CONTACTS.PHONE' | translate }}</label>
          <input id="contact-phone" formControlName="phone" type="tel" class="w-full bg-[#EEEFEF] text-[#3C485B] px-3 py-2" />
          @if (requestForm.get('phone')?.touched && requestForm.get('phone')?.invalid) {
            <div class="text-red-200 text-sm">*</div>
          }
        </div>
        <div>
          <label for="contact-model" class="block mb-1 text-[14px] leading-[20px] font-normal">{{ 'CONTACTS.MODEL' | translate }}</label>
          <input id="contact-model" formControlName="model" type="text" class="w-full bg-[#EEEFEF] text-[#3C485B] px-3 py-2" />
        </div>
        <div class="flex-1">
          <label for="contact-description" class="block mb-1 text-[14px] leading-[20px] font-normal">{{ 'CONTACTS.DESCRIPTION' | translate }}</label>
          <textarea id="contact-description" formControlName="description" rows="4" class="w-full bg-[#EEEFEF] text-[#3C485B] px-3 py-2"></textarea>
        </div>
        <div>
          <label class="block mb-1 text-[14px] leading-[20px] font-normal">{{ 'CONTACTS.CAPTCHA' | translate }}</label>
          <div #captchaRef></div>
          @if (captchaError) {
            <div class="text-red-200 text-sm">{{ 'CONTACTS.CAPTCHA_ERROR' | translate }}</div>
          }
        </div>
        <button type="submit" [attr.disabled]="!requestForm.valid || captchaError || loading"
          class="mt-2 bg-[#A8EB12] hover:bg-[#83BB11] hover:cursor-pointer text-[#051937] font-semibold text-[16px] leading-[24px] px-6 py-3 flex items-center justify-center"
          [class.opacity-50]="!requestForm.valid || captchaError || loading">
            <svg *ngIf="loading" class="animate-spin -ml-1 mr-2 h-5 w-5 text-[#051937]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
            </svg>
            {{ 'CONTACTS.SUBMIT' | translate }}
        </button>
      </form>
    </div>
  </div>
</section>
